/* fisker-blog v1.0.0 | (c) 2021 fisker Cheung | MIT License */
{"version":3,"sources":["app.js"],"names":["global","Function","config","require","Promise","callback","afterPromised","module_","resolve","document","_","now","Date","_toString","Object","prototype","toString","type","object","call","slice","_slice","Array","toArray","from","isArray","isArrayLike","length","parseInt","_forEach","forEach","function_","index","hasOwnProperty","value","key","_forInEach","forIn","_map","map","array","_filter","filter","result","filted","push","assign","target","arguments","source","hash","parse","pieces","split","data","decodeURIComponent","build","concat","encodeURIComponent","sort","join","search","localforage","setItem","then","getItem","markdown","code","options","all","mods","marked","highlight","setOptions","lang","getLanguage","highlightAuto","escapeHtmlChar","escape","s","replace","c","templates","github","newToken","token","remaining","reset","randomId","Math","random","request","path","parameters","gc","head","removeChild","script","window","callbackName","createElement","access_token","src","GITHUB_ISSUES_API_BASE","appendChild","reject","response","onerror","error","handleResponse","Error","message","meta","resetTokenRemaining","anonymousToken","rest","getToken","tokens","find","requestWithToken","getElementsByTagName","accessTokens","url","api","repoId","owner","repo","get","cached","page","expireTime","pageSize","pages","time","fetch","per_page","state","creator","storage","article","Link","ETag","item","created_at","title","number","cache","render","id","body","html","app","showHTML","container","innerHTML","showError","console","trace","showIndex","name","showArticle","showLoading","showPage","query","location","promise","label","alert","history","go","getElementById","run","addEventListener"],"mappings":"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","file":"../app.js","sourcesContent":["\n;(function() {\n  const global = Function('return this')()\n  const config = {\n  \"api\": \"//api.github.com\",\n  \"accessTokens\": [\n    [\n      \"5\",\n      \"a41e75c8b2\",\n      \"2c70d70b08ae21\",\n      \"5cd774758e3b8b0\"\n    ]\n  ],\n  \"cache\": {\n    \"index\": 5000,\n    \"article\": 60000\n  },\n  \"name\": \"fisker's blog\",\n  \"owner\": \"fisker\",\n  \"repo\": \"blog\",\n  \"pageSize\": 30,\n  \"require\": {\n    \"paths\": {\n      \"marked\": \"//cdn.bootcss.com/marked/0.7.0/marked.min\",\n      \"highlight-js\": \"//cdn.bootcss.com/highlight.js/9.15.8/highlight.min\",\n      \"es6-promise\": \"//cdn.bootcss.com/es6-promise/4.1.1/es6-promise.min\",\n      \"localforage\": \"//cdn.bootcss.com/localforage/1.7.3/localforage.min\"\n    }\n  }\n}\n  const require = global.require\n\n  require.config(config.require)\n\n  let Promise = global.Promise\n  ;(function(callback) {\n    /* global callback: true */\nif (!Promise) {\n  require(['es6-promise'], function (module_) {\n    // eslint-disable-next-line no-global-assign\n    Promise = module_.Promise\n    afterPromised()\n  })\n} else {\n  afterPromised()\n}\n\nfunction afterPromised() {\n  callback(function (module_) {\n    return new Promise(function (resolve, reject) {\n      require([module_], function (module_) {\n        resolve(module_)\n      })\n    })\n  })\n}\n\n  })\n  (function(require) {\n    const document = global.document\n\n    const _ = (function () {\n  const _ = global._ || (global._ = {})\n\n  _.now =\n    Date.now ||\n    function () {\n      // eslint-disable-next-line unicorn/prefer-date-now\n      return Number(new Date())\n    }\n\n  _.require = require\n  _.Promise = Promise\n\n  const _toString = Object.prototype.toString\n  _.type = function (object) {\n    return _toString.call(object).slice(7, -1)\n  }\n\n  const _slice = Array.prototype.slice\n  _.toArray =\n    Array.from ||\n    function (object) {\n      return _slice.call(object)\n    }\n\n  _.isArray =\n    Array.isArray ||\n    function (object) {\n      return _.type(object) === 'Array'\n    }\n\n  _.isArrayLike = function (object) {\n    return (\n      _.isArray(object) ||\n      (object &&\n        _.type(object.length) === 'Number' &&\n        parseInt(object.length, 10) === object.length)\n    )\n  }\n\n  const _forEach =\n    Array.prototype.forEach ||\n    function (function_) {\n      for (let index = 0; index < this.length; index += 1) {\n        function_.call(this, this[index], index, this)\n      }\n    }\n\n  const hasOwnProperty = function (value, key) {\n    return (\n      typeof value !== 'undefined' &&\n      value !== null &&\n      Object.prototype.hasOwnProperty.call(value, key)\n    )\n  }\n\n  const _forInEach = function (object, function_) {\n    for (const key in object) {\n      if (hasOwnProperty(object, key)) {\n        function_.call(object, object[key], key, object)\n      }\n    }\n  }\n\n  _.forIn = _forInEach\n\n  _.forEach = function (object, function_) {\n    ;(_.isArrayLike(object) ? _forEach : _forInEach).call(object, function_)\n  }\n\n  const _map =\n    Array.prototype.map ||\n    function (function_) {\n      const array = []\n      for (let index = 0; index < this.length; index += 1) {\n        array[index] = function_.call(this, this[index], index, this)\n      }\n\n      return array\n    }\n\n  _.map = function (object, function_) {\n    return _map.call(object, function_)\n  }\n\n  const _filter =\n    Array.prototype.filter ||\n    function (function_) {\n      const filted = []\n      for (let index = 0; index < this.length; index += 1) {\n        const result = function_.call(this, this[index], index, this)\n        if (result) {\n          filted.push(this[index])\n        }\n      }\n      return filted\n    }\n\n  _.filter = function (object, function_) {\n    return _filter.call(object, function_)\n  }\n\n  _.assign =\n    Object.assign ||\n    function (target) {\n      // eslint-disable-next-line prefer-rest-params\n      _.forEach(_slice.call(arguments, 1), function (source) {\n        _.forEach(source, function (value, key) {\n          target[key] = value\n        })\n      })\n\n      return target\n    }\n\n  _.hash = (function () {\n    function parseHash(hash) {\n      hash = hash.slice(2)\n      const pieces = hash ? hash.split('/') : []\n      const data = {}\n\n      for (let index = 0; index < pieces.length; index += 2) {\n        data[decodeURIComponent(pieces[index])] = decodeURIComponent(\n          pieces[index + 1] || ''\n        )\n      }\n\n      return data\n    }\n\n    function hashLink(data) {\n      const hash = []\n      _forInEach(data, function (value, key) {\n        hash.push(`${encodeURIComponent(key)}/${encodeURIComponent(value)}`)\n      })\n\n      return `#/${hash.sort().join('/')}`\n    }\n\n    return {\n      parse: parseHash,\n      build: hashLink,\n    }\n  })()\n\n  _.search = (function () {\n    function buildQuery(data) {\n      const search = []\n      _forInEach(data, function (value, key) {\n        search.push(`${encodeURIComponent(key)}=${encodeURIComponent(value)}`)\n      })\n\n      return search.join('&')\n    }\n\n    return {\n      build: buildQuery,\n    }\n  })()\n\n  // const templateCompiled = {}\n  // const templateOptions = {\n  //   _: _,\n  //   config: config\n  // }\n\n  // _.template = (function(template) {\n  //   if (templateCompiled[template]) {\n  //     return templateCompiled[template]\n  //   }\n  //   return require('lodash.template')\n  //     .then(function(engine) {\n  //       return templateCompiled[template] = engine(template, templateOptions)\n  //     })\n  // })\n\n  // _.render = function(template) {\n  //   return function(data) {\n  //     return Promise.resolve(_.template(template)).then(function(compiled) {\n  //       return compiled(data)\n  //     })\n  //   }\n  // }\n\n  _.localforage = (function () {\n    function setItem(key, value) {\n      return require('localforage').then(function (localforage) {\n        return localforage.setItem(key, value)\n      })\n    }\n\n    function getItem(key) {\n      return require('localforage').then(function (localforage) {\n        return localforage.getItem(key)\n      })\n    }\n\n    return {\n      setItem,\n      getItem,\n    }\n  })()\n\n  _.markdown = function (code, options) {\n    // eslint-disable-next-line import/no-unresolved\n    return Promise.all([require('marked'), require('highlight-js')]).then(\n      function (mods) {\n        const marked = mods[0]\n        const highlight = mods[1]\n        marked.setOptions({\n          highlight(code, lang) {\n            if (lang && highlight.getLanguage(lang)) {\n              return highlight.highlight(lang, code).value\n            }\n            return highlight.highlightAuto(code).value\n          },\n        })\n\n        return marked(code, options)\n      }\n    )\n  }\n\n  const escapeHtmlChar = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '`': '&#96;',\n  }\n  const reUnescapedHtml = /[\"&'<>`]/g\n  _.escape = function (s) {\n    return `${s}`.replace(reUnescapedHtml, function (c) {\n      return escapeHtmlChar[c]\n    })\n  }\n\n  return _\n})()\n\n    // avoid use with in strict mode\n    \n    \n    const templates = Function('config', \"return (function(){\\n  var undefined;\\n\\n  var freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\\n\\n  var freeSelf = typeof self == 'object' && self && self.Object === Object && self;\\n\\n  var root = freeGlobal || freeSelf || Function('return this')();\\n\\n  var freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\\n\\n  var freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\\n\\n  var _ = root._ || {};\\n\\n  /*----------------------------------------------------------------------------*/\\n\\n  var templates = {\\n    'article': {},\\n    'index': {}\\n  };\\n\\n  templates['article'] =   function(obj) {\\n    obj || (obj = {});\\n    var __t, __p = '', __e = _.escape, __j = Array.prototype.join;\\n    function print() { __p += __j.call(arguments, '') }\\n    with (obj) {\\n    __p += '<article class=\\\"article\\\"><h1 class=\\\"article__title\\\">' +\\n    __e( data.title ) +\\n    '</h1><header class=\\\"article__author\\\"><!-- <img class=\\\"article__author-avatar\\\" src=\\\"' +\\n    ((__t = ( data.user.avatar_url + '&s=40' )) == null ? '' : __t) +\\n    '\\\"> --><div>' +\\n    __e( data.created_at ) +\\n    '</div></header><hr><div class=\\\"markdown-body\\\">' +\\n    ((__t = ( data.html )) == null ? '' : __t) +\\n    '</div><footer>';\\n     data.labels.forEach(function(label) {\\n    __p += '<a href=\\\"' +\\n    ((__t = ( _.hash.build({label: label.name}) )) == null ? '' : __t) +\\n    '\\\" style=\\\"background:#' +\\n    ((__t = ( label.color)) == null ? '' : __t) +\\n    '\\\">' +\\n    __e( label.name) +\\n    '</a>';\\n     });\\n    __p += '</footer></article>';\\n\\n    }\\n    return __p\\n  };\\n\\n  templates['index'] =   function(obj) {\\n    obj || (obj = {});\\n    var __t, __p = '', __e = _.escape, __j = Array.prototype.join;\\n    function print() { __p += __j.call(arguments, '') }\\n    with (obj) {\\n    __p += '<h1>' +\\n    __e( config.name ) +\\n    '</h1><hr><ul class=\\\"list\\\">';\\n     data.forEach(function(article) {\\n    __p += '<li class=\\\"list__item\\\"><a class=\\\"list__title\\\" href=\\\"' +\\n    __e( _.hash.build({id: article.number}) ) +\\n    '\\\">' +\\n    __e( article.title ) +\\n    '</a><div class=\\\"list__meta\\\"> #' +\\n    __e( article.number ) +\\n    ' posted at <time class=\\\"list__time\\\" datetime=\\\"' +\\n    __e( article.created_at ) +\\n    '\\\">' +\\n    __e( article.created_at ) +\\n    '</time></div></li>';\\n     }) ;\\n    __p += '</ul>';\\n     if (meta.Link) {\\n    __p += '<hr><nav class=\\\"pagination\\\">';\\n\\n          meta.Link.forEach(function(link) {\\n          var pageIndex = link[0].match(/[?&]page=(\\\\d+)/)[1]\\n    __p += '<a href=\\\"' +\\n    __e( _.hash.build({page: pageIndex}) ) +\\n    '\\\" title=\\\"' +\\n    __e( link[1].rel ) +\\n    '\\\">' +\\n    __e( link[1].rel ) +\\n    '</a>';\\n     }) ;\\n    __p += '</nav>';\\n     }\\n\\n    }\\n    return __p\\n  };\\n;return templates})()\")(config)\n\n    /* global config: true, _: true */\nconst github = (function () {\n  const head = document.head || document.getElementsByTagName('head')[0]\n  const ANONYMOUS_TOKEN_LIMIT = 60\n  const ASSUME_TOKEN_LIMIT = 5000\n  const timeDiff = 0\n  const anonymousToken = newToken('')\n  const tokens = _.map(config.accessTokens, function (token) {\n    if (_.isArray(token)) {\n      token = token.join('')\n    }\n\n    return newToken(token)\n  })\n\n  const GITHUB_ISSUES_API_BASE = (function () {\n    let url = [config.api]\n    if (config.repoId) {\n      url = url.concat(['repositories', config.repoId])\n    } else {\n      url = url.concat(['repos', config.owner, config.repo])\n    }\n    url.push('issues')\n\n    return url.join('/')\n  })()\n\n  function newToken(token) {\n    return {\n      token,\n      remaining: token ? ASSUME_TOKEN_LIMIT : ANONYMOUS_TOKEN_LIMIT,\n      reset: 0,\n    }\n  }\n\n  function randomId() {\n    return (Math.random() * _.now()).toString(16).replace('.', '').slice(0, 6)\n  }\n\n  function request(path, parameters, token) {\n    token = token || {}\n    const callbackName = `jsonp_${randomId()}`\n    const script = document.createElement('script')\n    parameters = _.assign({}, parameters, {\n      callback: callbackName,\n    })\n\n    if (token.token) {\n      parameters.access_token = token.token\n    }\n\n    script.src = `${GITHUB_ISSUES_API_BASE + path}?${_.search.build(\n      parameters\n    )}`\n    head.appendChild(script)\n\n    function gc() {\n      head.removeChild(script)\n      window[callbackName] = null\n    }\n\n    return new Promise(function (resolve, reject) {\n      window[callbackName] = function (response) {\n        resolve(response)\n        gc()\n      }\n      script.onerror = function (error) {\n        reject(error)\n        gc()\n      }\n    }).then(function (data) {\n      return handleResponse(data, token)\n    })\n  }\n\n  function handleResponse(response, token) {\n    if (!response || !response.data) {\n      return Promise.reject(new Error('no data found.'))\n    }\n\n    if (response.data.message) {\n      return Promise.reject(response.data.message)\n    }\n\n    const {meta} = response\n    if (meta) {\n      const remaining = meta['X-RateLimit-Remaining']\n      const reset = meta['X-RateLimit-Reset']\n\n      if (remaining) {\n        token.remaining = parseInt(remaining, 10)\n      }\n\n      if (reset) {\n        token.reset = parseInt(remaining, 10) * 1000\n      }\n    }\n\n    return response\n  }\n\n  function resetTokenRemaining(token) {\n    if (!token.remaining && _.now() - anonymousToken.rest > 2 * 1000 * 1000) {\n      token.remaining = ASSUME_TOKEN_LIMIT\n    }\n\n    return token\n  }\n\n  function getToken() {\n    _.forEach(tokens, resetTokenRemaining)\n    return _.find(tokens, function (token) {\n      return token.remaining\n    })\n  }\n\n  function requestWithToken(path, parameters) {\n    const token = getToken()\n\n    return token\n      ? request(path, parameters, token)\n      : Promise.reject(new Error('no token'))\n  }\n\n  function get(path, parameters) {\n    resetTokenRemaining(anonymousToken)\n\n    if (anonymousToken.remaining) {\n      return request(path, parameters, anonymousToken).catch(function () {\n        return requestWithToken(path, parameters)\n      })\n    }\n    return requestWithToken(path, parameters)\n  }\n\n  return {\n    get,\n  }\n})()\n\n    /* global config: true, _: true, templates: true, github: true, article: true */\nconst index = (function () {\n  const INDEX_STORAGE_KEY = 'index'\n  const expireTime = ((config.cache && config.cache.index) || 0) * 1000\n  const render = templates.index\n\n  function cached(page) {\n    if (!expireTime) {\n      return\n    }\n    return _.localforage.getItem(INDEX_STORAGE_KEY).then(function (cached) {\n      if (!cached || cached.pageSize !== config.pageSize) {\n        return\n      }\n      const data = cached.pages[page - 1]\n      if (!data || !data.time || _.now() - data.time > expireTime) {\n        return\n      }\n      return data\n    })\n  }\n\n  function fetch(page) {\n    return github\n      .get('', {\n        page,\n        per_page: config.pageSize,\n        state: 'open',\n        creator: config.owner,\n      })\n      .then(function (data) {\n        storage(data, page)\n        return data\n      })\n  }\n\n  function storage(data, page) {\n    article.storage({\n      data: data.data,\n    })\n\n    if (!expireTime) {\n      return data\n    }\n    return _.localforage\n      .getItem(INDEX_STORAGE_KEY)\n      .then(function (cached) {\n        if (!cached || cached.pageSize !== config.pageSize) {\n          cached = {\n            pages: [],\n            pageSize: config.pageSize,\n          }\n        }\n\n        cached.pages[page - 1] = {\n          meta: {\n            Link: data.meta.Link,\n            ETag: data.meta.ETag,\n          },\n          time: _.now(),\n          data: [],\n        }\n\n        cached.pages[page - 1].data = data.data.map(function (item) {\n          return {\n            created_at: item.created_at,\n            title: item.title,\n            number: item.number,\n          }\n        })\n\n        cached.time = _.now()\n\n        return cached\n      })\n      .then(function (cached) {\n        return _.localforage.setItem(INDEX_STORAGE_KEY, cached)\n      })\n      .then(function () {\n        return data\n      })\n  }\n\n  function get(page) {\n    page = parseInt(page, 10) || 1\n    if (page < 1) {\n      page = 1\n    }\n\n    return Promise.resolve()\n      .then(function () {\n        return cached(page)\n      })\n      .then(function (data) {\n        return data || fetch(page)\n      })\n  }\n\n  return {\n    get,\n    storage,\n    render,\n  }\n})()\n\n    /* global _: true, config: true, templates: true, github: true */\nconst article = (function () {\n  const ARTICLES_STORAGE_KEY = 'articles'\n  const expireTime = ((config.cache && config.cache.article) || 0) * 1000\n  const render = templates.article\n\n  function cached(id) {\n    if (!expireTime) {\n      return\n    }\n\n    return _.localforage.getItem(ARTICLES_STORAGE_KEY).then(function (cached) {\n      const data = cached && cached[id]\n      if (!data || !data.time || _.now() - data.time > expireTime) {\n        return\n      }\n      return data\n    })\n  }\n\n  function fetch(id) {\n    return github.get(`/${id}`).then(function (data) {\n      storage(data)\n      return data\n    })\n  }\n\n  function storage(data) {\n    if (!expireTime) {\n      return data\n    }\n\n    return _.localforage\n      .getItem(ARTICLES_STORAGE_KEY)\n      .then(function (cached) {\n        cached = cached || {}\n\n        if (data.data.forEach) {\n          data.data.forEach(function (item) {\n            cached[item.number] = {\n              data: item,\n              id: item.number,\n              time: _.now(),\n              meta: {\n                ETag: data.meta && data.meta.ETag,\n              },\n            }\n          })\n        } else {\n          cached[data.data.number] = {\n            data: data.data,\n            id: data.data.number,\n            time: _.now(),\n            meta: {\n              ETag: data.meta && data.meta.ETag,\n            },\n          }\n        }\n\n        return cached\n      })\n      .then(function (cached) {\n        return _.localforage.setItem(ARTICLES_STORAGE_KEY, cached)\n      })\n      .then(function () {\n        return data\n      })\n  }\n\n  function get(id) {\n    id = Number(id)\n\n    return Promise.resolve()\n      .then(function () {\n        return cached(id)\n      })\n      .then(function (data) {\n        return data || fetch(id)\n      })\n      .then(function (data) {\n        return _.markdown(data.data.body).then(function (html) {\n          data.data.html = html\n          return data\n        })\n      })\n  }\n\n  return {\n    get,\n    storage,\n    render,\n  }\n})()\n\n    /* global config: true, _: true, article: true, index: true */\nconst app = (function () {\n  const container = document.getElementById('js-app')\n\n  function showHTML(html) {\n    container.innerHTML = html\n  }\n\n  function showError(error) {\n    console.trace(error)\n    container.innerHTML =\n      'error occured <button onclick=\"location.reload()\">retry</button>'\n  }\n\n  function showIndex(page) {\n    document.title = config.name\n    return index.get(page).then(index.render)\n  }\n\n  function showArticle(id) {\n    return article\n      .get(id)\n      .then(function (data) {\n        document.title = data.data.title\n        return data\n      })\n      .then(article.render)\n  }\n\n  function showLoading() {\n    container.innerHTML = 'loading...'\n  }\n\n  function showPage() {\n    const query = _.hash.parse(window.location.hash)\n    showLoading()\n    let promise\n\n    if (query.id) {\n      promise = showArticle(query.id)\n    } else if (query.label) {\n      alert('暂时不支持标签')\n      window.history.go(-1)\n      return\n    } else {\n      promise = showIndex(query.page)\n    }\n\n    return promise.then(showHTML).catch(showError)\n  }\n\n  function run() {\n    showPage()\n    window.addEventListener('hashchange', showPage, false)\n  }\n\n  return {\n    run,\n  }\n})()\n\n\n    app.run()\n  })\n})()\n"]}